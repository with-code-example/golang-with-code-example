<!doctype html>
<html
  itemscope
  class="{{- if not site.Params.theme_switcher -}}
    {{- site.Params.theme_default -}}
  {{- end -}}"
  lang="{{ site.LanguageCode | default `en-US` }}"
  itemtype="http://schema.org/WebPage">
  <head>
    <meta name="robots" content="max-image-preview:large">
    <!-- head (don't cache it) -->
    {{ partial "essentials/head.html" . }}

    {{ partial "essentials/seo.html" . }}
    <!-- style (always cache it) -->
    {{ partialCached "essentials/style.html" . }}
    <!-- <script defer>
      !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
      posthog.init('phc_725Y2HIAz1fH1l2j7aISgX1AUr2iTBUVM5bcn5IIzoJ',{api_host:'https://app.posthog.com'})
    </script> -->
    {{ $image:= .Params.featured_image }}
    {{ if $image }}
      <link rel="preload" href="{{ $image }}" as="image">
    {{ end }}
    {{ if and .Params.audio (ne  (index .Params.audio ) "") }}
      <link rel="stylesheet" href="https://unpkg.com/plyr@3.7.8/dist/plyr.css">
    {{ end }}
    <script defer data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="harendra" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FF813F" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
  </head>

  <body>
    <!-- cache partial only in production -->
    {{ if hugo.IsProduction }}
      {{ partialCached "preloader.html" . }}
      {{ partialCached "gtm-noscript.html" . }}
    {{ else }}
      {{ partial "preloader.html" . }}


      <!-- tailwind size indicator -->
      {{ partial "components/tw-size-indicator.html" . }}
    {{ end }}


    <!-- header (don't cache it) -->
    {{ partial "essentials/header.html" . }}
    {{ partial "search-modal.html" (dict "Context" . ) }}


    <main>
      {{ block "main" . }}{{ end }}
    </main>

    <!-- cache partial only in production -->
    {{ if hugo.IsProduction }}
      {{ partialCached "essentials/footer.html" . }}
      {{ partialCached "essentials/script.html" . }}
    {{ else }}
      {{ partial "essentials/footer.html" . }}
      {{ partial "essentials/script.html" . }}
    {{ end }}
    

    {{ if and .Params.audio (ne  (index .Params.audio ) "") }}
    <script src="https://unpkg.com/plyr@3.7.8/dist/plyr.min.js" defer></script>
      <script>
        const player = new Plyr('#player', {
          title: '{{ .Title }}',
        });
        window.player = player;
        player.on('play', (event) => {
          posthog.capture('paying_audio', {
            title: '{{ .Title }}',
            url: '{{ .Permalink }}',
          })
        });
      </script>
    {{ end }}

  </body>
</html>
